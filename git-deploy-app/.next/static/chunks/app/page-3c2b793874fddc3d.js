(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6781:function(e,t,r){Promise.resolve().then(r.bind(r,6437))},6437:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var s=r(4297),n=r(8488),o=r.n(n),i=r(3812),l=r(3794),a=r(1946),c=r(8243),d=r(3198);function u(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,d.m6)((0,c.W)(t))}let f=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),p=i.forwardRef((e,t)=>{let{className:r,variant:n,size:o,asChild:i=!1,...a}=e,c=i?l.g7:"button";return(0,s.jsx)(c,{className:u(f({variant:n,size:o,className:r})),ref:t,...a})});p.displayName="Button";let g=i.forwardRef((e,t)=>{let{className:r,type:n,...o}=e;return(0,s.jsx)("input",{type:n,className:u("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...o})});g.displayName="Input";var b=r(4446),m=r(2380);function h(){let[e,t]=(0,i.useState)(""),[r,n]=(0,i.useState)([]),[l,a]=(0,i.useState)(!1),[c,d]=(0,i.useState)(),[u,f]=(0,i.useState)(),h=(0,m.io)("/",{path:"/vercel-deployment-pipeline/socket"}),x=(0,i.useRef)(null),v=(0,i.useMemo)(()=>e&&""!==e.trim()?[new RegExp(/^(?:https?:\/\/)?(?:www\.)?github\.com\/([^\/]+)\/([^\/]+)(?:\/)?$/).test(e),"Enter valid Github Repository URL"]:[!1,null],[e]),y=(0,i.useCallback)(async()=>{a(!0),N("Deployment in progress...");let t=await fetch("/vercel-deployment-pipeline/api/project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gitURL:e,slug:c})}),r=await t.json();if(r&&r.data){let{projectSlug:e,url:t}=r.data;d(e),f(t),console.log("Subscribing to logs:".concat(e)),h&&h.emit("subscribe","logs:".concat(e))}},[c,h,e]),j=(0,i.useRef)(new Set),[w,N]=(0,i.useState)("Deploy"),k=(0,i.useCallback)(e=>{var t;let{log:r,id:s}=JSON.parse(e);j.current.has(s)||(j.current.add(s),n(e=>[...e,r]),"Process completed successfully"===r?(N("Deployed"),a(!1)):"Failed to build project"===r&&(N("Failed to deploy"),a(!1))),null===(t=x.current)||void 0===t||t.scrollIntoView({behavior:"smooth"})},[]);return(0,i.useEffect)(()=>{if(h)return h.on("message",e=>{console.log("[Incoming Socket Message]:",typeof e,e),k(e)}),()=>{h.off("message",k)}},[k,h]),(0,s.jsx)("main",{className:"flex justify-center items-center h-[100vh]",children:(0,s.jsxs)("div",{className:"w-[600px]",children:[(0,s.jsxs)("span",{className:"flex justify-start items-center gap-2",children:[(0,s.jsx)(b.Z,{className:"text-5xl"}),(0,s.jsx)(g,{disabled:l,value:e,onChange:e=>t(e.target.value),type:"url",placeholder:"Github URL"})]}),(0,s.jsx)(p,{onClick:y,disabled:!v[0]||l,className:"w-full mt-3",children:w}),"Deployed"===w&&u&&(0,s.jsx)("div",{className:"mt-2 bg-slate-900 py-4 px-2 rounded-lg",children:(0,s.jsxs)("p",{children:["Preview URL"," ",(0,s.jsx)("a",{target:"_blank",className:"text-sky-400 bg-sky-950 px-3 py-2 rounded-lg",href:u,children:u})]})}),r.length>0&&(0,s.jsx)("div",{className:"".concat(o().className," text-sm text-green-500 logs-container mt-5 border-green-500 border-2 rounded-lg p-4 h-[300px] overflow-y-auto"),children:(0,s.jsx)("pre",{className:"flex flex-col gap-1",children:r.map((e,t)=>(0,s.jsx)("code",{ref:r.length-1===t?x:void 0,children:"> ".concat(e)},t))})})]})})}}},function(e){e.O(0,[836,681,452,744],function(){return e(e.s=6781)}),_N_E=e.O()}]);